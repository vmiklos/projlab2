\documentclass[hyperref={pdfpagelabels=false}]{beamer}
\author{Vajna Miklós}

\setbeamertemplate{background canvas}[vertical shading][bottom=white,top=structure.fg!25]

\usetheme{Warsaw}
\setbeamertemplate{headline}{}
\setbeamertemplate{footline}[page number]
\setbeamersize{text margin left=0.5cm}
  
\usepackage[magyar, english]{babel}

\usepackage{times}
\usepackage[latin2]{inputenc}
\usepackage[T1]{fontenc}

\begin{document}

\title{A dm-mirror hibatûrése és teljesítménye}
\date{2010. december 9.}

\frame{\titlepage}

\begin{frame}
\frametitle{Bevezetõ}
\begin{columns}[c]
\column{2.2in}
\begin{itemize}
\item A dm-mirror (device-mapper's mirror) egy tipikus 3 rétegû architektúra legalsó szintje \emph{alatt} található
\item Egy szoftveres tükrözési megoldás a Linux kernelben
\item device-mapper keretrendszerre épül (logikai kötetkezelés)
\item Kezdeti probléma: szuboptimális teljesítmény a fizikai diszkek eltérõ elérési sebessége esetén
\end{itemize}
\column{0.8in}
\framebox{\includegraphics[width=18mm,keepaspectratio]{layers.eps}}
\end{columns}
\end{frame}

\begin{frame}
\frametitle{Motiváció}
\begin{itemize}
\item A lassú I/O könnyen válhat egy szolgáltatás szûk keresztmetszetévé
\item Szoftveres türközés: így a tükrözõ algoritmus könnyen módosítható
\item Linux kernel része: szabadon hozzáférhetõ és módosítható
\item Az elkészült munkát hoszútávon cél visszajuttatni a kernelbe
\end{itemize}
\end{frame}

\begin{frame}
\frametitle{Feladat leírása}
\begin{itemize}
\item dm-mirror kipróbálása, írási / olvasási teljesítmény mérése
\item dm-mirror hibatûrésének tesztelése
\item Mérési teszt környezet kialakítása, a teszt eszközök validálása
\item Olvasási teljesítmény javítása abban az esetben, ha a diszkek elérési sebessége különbözik
\end{itemize}
\end{frame}

\begin{frame}
\frametitle{Megoldott feladatok}
\framesubtitle{dm-mirror kipróbálása, írási / olvasási teljesítmény mérése}
\begin{figure}[H]
\includegraphics[width=55mm,keepaspectratio]{testarch.eps}
\includegraphics[width=55mm,keepaspectratio]{testmirror.eps}
\end{figure}
\begin{itemize}
\item Különbözõ diszkek esetén: lassú diszk szimulálása iSCSI-val
\item Hálózaton késleltetés és/vagy sávszélesség-korlátozás szimulálása
\item Tükör komponensei: 2 adat láb, 1 vagy 2 naplózó láb
\item Ezek lehetnek helyben vagy távoli gépen
\end{itemize}
\end{frame}

\begin{frame}
\frametitle{Megoldott feladatok}
\framesubtitle{dm-mirror hibatûrésének tesztelése}

Környezet:

\begin{itemize}
\item VMware Workstation 7.1.3
\item Gépekben 256MB RAM
\item Két gép között dedikált virtuális hálózat
\item A teszt tárgya tipikusan 2MB adat írása/olvasása valamilyen típusú tükrön
\end{itemize}

Teszt típusok:

\begin{itemize}
\item Írás diszkre mikor a tükör létrehozása még folyamatban van
\item Írás diszkre közvetlenül a rendszer újraindítása után
\item Írás / olvasás az iSCSI diszk elérhetetlensége esetén
\end{itemize}
\end{frame}

\begin{frame}
\frametitle{Megoldott feladatok}
\framesubtitle{Teszt eszközök validálása}
\begin{itemize}
\item A tc eszköz használata forgalomszabályozásra
\item Sávszélesség-korlátozás és hálózati késleltetés
\item Valós WAN környezet paramétereinek mérése
\item Szimulált környezetben validálás: azonos olvasás / írás eredményeket kapunk?
\end{itemize}
\end{frame}

\begin{frame}
\frametitle{Megoldott feladatok}
\framesubtitle{Olvasási teljesítmény javítása}
\begin{figure}[H]
\includegraphics[width=40mm,keepaspectratio]{7_69a4ab34.eps}
\end{figure}
\begin{itemize}
\item Eredetileg: olvasás esetén Round-Robin algoritmus váltogat a fizikai diszkek között (kék)
\item A váltás gyakorisága állítható
\item Javítás: a váltás kikapcsolható (ha távoli diszken áll, lassu - zöld), a
használt diszk kézzel felülbírálható (pl. helyi diszkre: piros)
\item Eredmény: 200ms hálózati késleltetés esetén 14-szeres gyorsulás
\end{itemize}
\end{frame}

\begin{frame}
\frametitle{Jövõbeli lehetõségek}
\begin{itemize}
\item Súlyozott Round-Robin olvasáskor
\item A tükör naplózó lába nincs kihasználva abban az esetben ha az egyik adat
láb elérhetetlenné válik
\item Olvasási algoritmusok modularizálása
\end{itemize}
\end{frame}

\begin{frame}
\frametitle{Összefoglalás}
\begin{itemize}
\item A dm-mirror egy szoftveres tükrözési megoldás a Linux kernelben
\item Mind teljesítmény, mind hibatûrés szempontjából van mit javítani rajta
\item Elkészült egy teszt környezet, mely valósan tud szimulálni problémásan elérhetõ diszkeket
\item Elkészült egy megoldás, mellyel a tükör olvasási teljesítménye
nagymértékben megnövelhetõ bizonyos körülmények között
\end{itemize}
\end{frame}
\end{document}
